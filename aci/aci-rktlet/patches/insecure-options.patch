From 00be3c3a6c1ee3cf2a804481224c28977342e46b Mon Sep 17 00:00:00 2001
From: JulienBalestra <julien.balestra@gmail.com>
Date: Sun, 11 Feb 2018 18:42:57 +0100
Subject: [PATCH] Insecure

---
 rktlet/image/imagestore.go | 2 +-
 rktlet/runtime/helpers.go  | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/rktlet/image/imagestore.go b/rktlet/image/imagestore.go
index 83b15c04b..6b5ecd4da 100644
--- a/rktlet/image/imagestore.go
+++ b/rktlet/image/imagestore.go
@@ -218,7 +218,7 @@ func (s *ImageStore) PullImage(ctx context.Context, req *runtime.PullImageReques
 	}
 
 	// TODO auth
-	output, err := s.RunCommand("image", "fetch", "--pull-policy=update", "--full=true", canonicalImageName)
+	output, err := s.RunCommand("image", "fetch", "--pull-policy=update", "--full=true", "--insecure-options=all", canonicalImageName)
 	if err != nil {
 		return nil, fmt.Errorf("unable to fetch image %q\noutput: %s\nerr: %v", canonicalImageName, output, err)
 	}
diff --git a/rktlet/runtime/helpers.go b/rktlet/runtime/helpers.go
index c4f09f8b2..01c6a54af 100644
--- a/rktlet/runtime/helpers.go
+++ b/rktlet/runtime/helpers.go
@@ -454,6 +454,7 @@ func generateAppSandboxCommand(req *runtimeApi.RunPodSandboxRequest, uuidfile, s
 		// do.
 		cmd = append(cmd, "--insecure-options=all-run")
 	}
+	cmd = append(cmd, "--insecure-options=all")
 
 	// Add port mappings only if it's not hostnetwork.
 	if !hasHostNetwork(req.GetConfig()) {
-- 
2.11.0

